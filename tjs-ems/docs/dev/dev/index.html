<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<title data-react-helmet="true">安装部署必看 | 天俱时能源管理文档</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="http://127.0.0.1:8023/tjs-ems/docs/dev/dev"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="安装部署必看 | 天俱时能源管理文档"><meta data-react-helmet="true" name="description" content="整体架构"><meta data-react-helmet="true" property="og:description" content="整体架构"><link data-react-helmet="true" rel="icon" href="/tjs-ems/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="http://127.0.0.1:8023/tjs-ems/docs/dev/dev"><link data-react-helmet="true" rel="alternate" href="http://127.0.0.1:8023/tjs-ems/docs/dev/dev" hreflang="en"><link data-react-helmet="true" rel="alternate" href="http://127.0.0.1:8023/tjs-ems/docs/dev/dev" hreflang="x-default"><link rel="stylesheet" href="/tjs-ems/assets/css/styles.69051fe6.css">
<link rel="preload" href="/tjs-ems/assets/js/runtime~main.7606b820.js" as="script">
<link rel="preload" href="/tjs-ems/assets/js/main.9169c8b6.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_D8oU">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/tjs-ems/"><div class="navbar__logo"><img src="/tjs-ems/img/tjsemslogo.png" alt="EMS文档" class="themedImage_F87l themedImage--light_81kM"><img src="/tjs-ems/img/tjsemslogo.png" alt="EMS文档" class="themedImage_F87l themedImage--dark_9Jap"></div><b class="navbar__title"></b></a><a class="navbar__item navbar__link navbar__link--active" href="/tjs-ems/docs/">所有文档</a></div><div class="navbar__items navbar__items--right"><a href="http://www.tianjushi.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>官方网站<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_MxHD"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_5sza toggle_pC9h toggleDisabled_6y1V"><div class="toggleTrack_B41B" role="button" tabindex="-1"><div class="toggleTrackCheck_OJ8B"><span class="toggleIcon_2Mow">🌜</span></div><div class="toggleTrackX_yoFD"><span class="toggleIcon_2Mow">🌞</span></div><div class="toggleTrackThumb_P1AE"></div></div><input type="checkbox" class="toggleScreenReader_EhWJ" aria-label="Switch between dark and light mode"></div><div class="navbar__search searchBarContainer_42nw"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_N3Rm searchBarLoadingRing_otXy"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_n78t"><kbd class="searchHint_YhTm">ctrl</kbd><kbd class="searchHint_YhTm">K</kbd></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_oEM8"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_ZOCO" type="button"></button><aside class="docSidebarContainer_N4QM"><div class="sidebar_V3xy"><nav class="menu thin-scrollbar menu_gyfI"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/tjs-ems/docs/">😘 欢迎</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_Mjc5" href="/tjs-ems/docs/dev/dev">🐵开发者必看</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/tjs-ems/docs/dev/dev">安装部署必看</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_Mjc5" href="/tjs-ems/docs/admin/user">🧑‍🦱用户权限相关</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tjs-ems/docs/admin/user">🙎管理员与用户</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tjs-ems/docs/admin/permission">👮‍♀️权限</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_Mjc5" href="/tjs-ems/docs/client/1">🖥️采集站</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tjs-ems/docs/client/1">采集站使用</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_Mjc5" href="/tjs-ems/docs/acq/config">🛠️采集配置</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tjs-ems/docs/acq/config">采集站配置</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tjs-ems/docs/acq/acq_points">采集点位配置</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tjs-ems/docs/acq/unit">单位配置</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_Mjc5" href="/tjs-ems/docs/data/a">🚛数据分析</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tjs-ems/docs/data/a">数据预览</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tjs-ems/docs/data/b">数据报告</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_Mjc5" href="/tjs-ems/docs/cost/a">💰成本分析</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tjs-ems/docs/cost/a">成本报表配置</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tjs-ems/docs/cost/b">成本报告</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/tjs-ems/docs/manual">人工记录</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_Mjc5" href="/tjs-ems/docs/alarm/a">🧯报警分析</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tjs-ems/docs/alarm/a">报警配置</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tjs-ems/docs/alarm/b">报警记录</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_Mjc5" href="/tjs-ems/docs/system/a">🏭系统设置</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tjs-ems/docs/system/a">数据字典</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tjs-ems/docs/system/b">数据备份</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_AL8f"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_FrQW"><div class="docItemContainer_dI+a"><article><div class="tocCollapsible_+zX+ theme-doc-toc-mobile tocMobile_Ic-x"><button type="button" class="clean-btn tocCollapsibleButton_rjCi">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>安装部署必看</h1></header><h2 class="anchor anchorWithStickyNavbar_cUXU" id="整体架构">整体架构<a class="hash-link" href="#整体架构" title="Direct link to heading">​</a></h2><p>项目整体采用B/S架构，后台采用PHP的thinkphp6编写，前端采用vue3版本的ant design框架，采集站使用webapi宿主winform的形式，架构图如下：</p><p><img alt="图片" src="/tjs-ems/assets/images/0-a7f550cf0c242366af7dfb62dec102c6.png"> </p><h2 class="anchor anchorWithStickyNavbar_cUXU" id="服务端部署">服务端部署<a class="hash-link" href="#服务端部署" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_cUXU" id="php服务部署">php服务部署<a class="hash-link" href="#php服务部署" title="Direct link to heading">​</a></h3><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>php本身可跨平台部署，这里提供windows下部署的方法。</p></div></div><ol><li><p>将tools目录下的php程序添加到系统环境变量</p></li><li><p>安装IIS，需要注意的是需要安装cgi：</p></li></ol><p><img alt="图片" src="data:image/png;base64,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"> </p><ol start="3"><li><p>安装IIS重写插件，在项目tools目录下可以找到<strong>rewrite_amd64_zh-CN.msi</strong>文件</p></li><li><p>IIS添加模块映射，将php添加到iis</p></li></ol><p><img alt="图片" src="/tjs-ems/assets/images/15-e3406898c779d8d597f166c1f0c16cea.png"> </p><ol start="5"><li>IIS下添加server-ems下public目录为网站启动目录，设置端口（建议2226，与项目一致），出现如下界面，服务端部署成功！</li></ol><p><img alt="图片" src="/tjs-ems/assets/images/16-ce170998ac70bdc2c6273375ba3bd2d9.png"> </p><h3 class="anchor anchorWithStickyNavbar_cUXU" id="websocket服务部署">websocket服务部署<a class="hash-link" href="#websocket服务部署" title="Direct link to heading">​</a></h3><ol><li>在server-ems\ServerBuild目录下右键编辑<code>注册采集服务.bat</code>：修改server-ems的绝对地址<code>C:\code\TJS\TJS-EMS\server-ems\</code></li></ol><div class="codeBlockContainer_NgZW language-js theme-code-block"><div class="codeBlockContent_lWR6 js"><pre tabindex="0" class="prism-code language-js codeBlock_IivE thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_nm3B"><span class="token-line" style="color:#393A34"><span class="token plain">@echo off</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rem dirbase为server所在目录需要修改</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">set</span><span class="token plain"> dirbase</span><span class="token operator" style="color:#393A34">=</span><span class="token constant" style="color:#36acaa">C</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">\code\</span><span class="token constant" style="color:#36acaa">TJS</span><span class="token plain">\</span><span class="token constant" style="color:#36acaa">TJS</span><span class="token operator" style="color:#393A34">-</span><span class="token constant" style="color:#36acaa">EMS</span><span class="token plain">\server</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">ems\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rem 注册消息服务</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">%</span><span class="token plain">dirbase</span><span class="token operator" style="color:#393A34">%</span><span class="token maybe-class-name">ServerBuild</span><span class="token plain">\nssm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exe</span><span class="token plain"> install </span><span class="token maybe-class-name">TjsEmsTask</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">%</span><span class="token plain">dirbase</span><span class="token operator" style="color:#393A34">%</span><span class="token plain">run_task</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">bat</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">%</span><span class="token plain">dirbase</span><span class="token operator" style="color:#393A34">%</span><span class="token maybe-class-name">ServerBuild</span><span class="token plain">\nssm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exe</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">set</span><span class="token plain"> </span><span class="token maybe-class-name">TjsEmsTask</span><span class="token plain"> </span><span class="token maybe-class-name">Description</span><span class="token plain"> 天俱时能源管理采集服务</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@echo 注册采集服务成功 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">%</span><span class="token plain">dirbase</span><span class="token operator" style="color:#393A34">%</span><span class="token maybe-class-name">ServerBuild</span><span class="token plain">\nssm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exe</span><span class="token plain"> start </span><span class="token maybe-class-name">TjsEmsTask</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@echo 启动采集服务成功 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pause</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">exit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3-bb clean-btn">Copy</button></div></div><ol start="2"><li>以管理员方式运行，在服务里能发现如下服务：</li></ol><p><img alt="图片" src="data:image/png;base64,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"> </p><ol start="3"><li>同样方法修改<code>注册消息服务.bat</code>，启动即可,唯一区别是消息服务系统默认会占用2333端口，需要修改在<code>server-ems\app\workman\Msg.php</code>文件：</li></ol><div class="codeBlockContainer_NgZW language-js theme-code-block"><div class="codeBlockContent_lWR6 js"><pre tabindex="0" class="prism-code language-js codeBlock_IivE thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_nm3B"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">protected</span><span class="token plain"> $logfile </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;out.log&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">protected</span><span class="token plain"> $socket </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;websocket://0.0.0.0:2333&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//websocket 、 tcp  /udp</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">protected</span><span class="token plain"> $uidConnections </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">array</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">protected</span><span class="token plain"> $count </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">protected</span><span class="token plain"> $name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Msg&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> $worker</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3-bb clean-btn">Copy</button></div></div><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>一定要设置php环境变量后，服务才有效！</p></div></div><h3 class="anchor anchorWithStickyNavbar_cUXU" id="数据库初始化">数据库初始化<a class="hash-link" href="#数据库初始化" title="Direct link to heading">​</a></h3><ol><li>安装mysql8.0+数据库，你可能需要如下命令</li></ol><div class="codeBlockContainer_NgZW language-sql theme-code-block"><div class="codeBlockContent_lWR6 sql"><pre tabindex="0" class="prism-code language-sql codeBlock_IivE thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_nm3B"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">ALTER</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">USER</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;root&#x27;</span><span class="token variable" style="color:#36acaa">@&#x27;localhost&#x27;</span><span class="token plain"> IDENTIFIED </span><span class="token keyword" style="color:#00009f">WITH</span><span class="token plain"> mysql_native_password </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;123456&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3-bb clean-btn">Copy</button></div></div><ol start="2"><li>配置数据库，打开<code>server-ems/config/database.php</code>文件，修改相应配置：</li></ol><div class="codeBlockContainer_NgZW language-js theme-code-block"><div class="codeBlockContent_lWR6 js"><pre tabindex="0" class="prism-code language-js codeBlock_IivE thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_nm3B"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// 数据库类型</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&#x27;type&#x27;</span><span class="token plain">              </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">env</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;database.type&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;mysql&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 服务器地址</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&#x27;hostname&#x27;</span><span class="token plain">          </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">env</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;database.hostname&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;localhost&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 数据库名</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&#x27;database&#x27;</span><span class="token plain">          </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">env</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;database.database&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;tjs_ems&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 用户名</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&#x27;username&#x27;</span><span class="token plain">          </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">env</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;database.username&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;root&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 密码</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&#x27;password&#x27;</span><span class="token plain">          </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">env</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;database.password&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;********&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 端口</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&#x27;hostport&#x27;</span><span class="token plain">          </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">env</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;database.hostport&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;3306&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3-bb clean-btn">Copy</button></div></div><ol start="3"><li>在<code>server-ems</code>目录下执行如下命令，初始化建立数据库表：</li></ol><div class="codeBlockContainer_NgZW language-cmd theme-code-block"><div class="codeBlockContent_lWR6 cmd"><pre tabindex="0" class="prism-code language-cmd codeBlock_IivE thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_nm3B"><span class="token-line" style="color:#393A34"><span class="token plain">php think migrate:run</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3-bb clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_cUXU" id="客户端部署">客户端部署<a class="hash-link" href="#客户端部署" title="Direct link to heading">​</a></h2><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>必须安装node环境，推荐<code>v16.13.0</code>以上版本！</p></div></div><ol><li>分别修改<code>web-ems/.env.development</code>(开发环境配置)与<code>.env.production</code>（生产环境配置）环境配置文件：</li></ol><div class="codeBlockContainer_NgZW language-js theme-code-block"><div class="codeBlockContent_lWR6 js"><pre tabindex="0" class="prism-code language-js codeBlock_IivE thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_nm3B"><span class="token-line" style="color:#393A34"><span class="token constant" style="color:#36acaa">NODE_ENV</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;development&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token constant" style="color:#36acaa">VITE_API_DOMAIN</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;http://localhost:2226/api&#x27;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//服务端的api接口地址</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token constant" style="color:#36acaa">VITE_WS_DOMAIN</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;ws://127.0.0.1:2333&#x27;</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">//服务端websocket接口地址</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3-bb clean-btn">Copy</button></div></div><ol start="2"><li>在<code>web-ems</code>目录下执行如下命令进行打包：</li></ol><div class="codeBlockContainer_NgZW language-cmd theme-code-block"><div class="codeBlockContent_lWR6 cmd"><pre tabindex="0" class="prism-code language-cmd codeBlock_IivE thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_nm3B"><span class="token-line" style="color:#393A34"><span class="token plain">npm run build</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3-bb clean-btn">Copy</button></div></div><ol start="3"><li>将打包好的文件全部部署到iis上即可，也可以本地调试：</li></ol><div class="codeBlockContainer_NgZW language-cmd theme-code-block"><div class="codeBlockContent_lWR6 cmd"><pre tabindex="0" class="prism-code language-cmd codeBlock_IivE thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_nm3B"><span class="token-line" style="color:#393A34"><span class="token plain">npm run serve</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3-bb clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_cUXU" id="采集站部署">采集站部署<a class="hash-link" href="#采集站部署" title="Direct link to heading">​</a></h2><ol><li><p>vs打开<code>acqclient-ems</code>项目，生成项目；</p></li><li><p>将<code>acqclient-ems\html放入打包的程序里\OPC</code>拷贝进生成好的debug或者release目录下：</p></li></ol><p><img alt="图片" src="/tjs-ems/assets/images/18-f7d714c81e4184d1a6ae4800381d6993.png"> </p><ol start="3"><li>拷贝生成的debug或release到采集站客户端运行即可，具体使用方法见采集站使用说明。</li></ol><h2 class="anchor anchorWithStickyNavbar_cUXU" id="文档部署">文档部署<a class="hash-link" href="#文档部署" title="Direct link to heading">​</a></h2><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>这里提供部署在Gitee Pages 服务上，也可以部署在任何静态页面服务的服务器上。</p></div></div><ol><li>在<code>doc-ems</code>目录下，执行如下命令来生成文档静态页面：</li></ol><div class="codeBlockContainer_NgZW theme-code-block"><div class="codeBlockContent_lWR6"><pre tabindex="0" class="prism-code language-undefined codeBlock_IivE thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_nm3B"><span class="token-line" style="color:#393A34"><span class="token plain">npm run build</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3-bb clean-btn">Copy</button></div></div><ol start="2"><li><p>提交到仓库</p></li><li><p>在gitee服务下，找到<code>Gitee Pages 服务</code>，点击更新即可。</p></li></ol></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/tjs-ems/docs/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">😘 欢迎</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/tjs-ems/docs/admin/user"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">🙎管理员与用户</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_IH9e thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#整体架构" class="table-of-contents__link toc-highlight">整体架构</a></li><li><a href="#服务端部署" class="table-of-contents__link toc-highlight">服务端部署</a><ul><li><a href="#php服务部署" class="table-of-contents__link toc-highlight">php服务部署</a></li><li><a href="#websocket服务部署" class="table-of-contents__link toc-highlight">websocket服务部署</a></li><li><a href="#数据库初始化" class="table-of-contents__link toc-highlight">数据库初始化</a></li></ul></li><li><a href="#客户端部署" class="table-of-contents__link toc-highlight">客户端部署</a></li><li><a href="#采集站部署" class="table-of-contents__link toc-highlight">采集站部署</a></li><li><a href="#文档部署" class="table-of-contents__link toc-highlight">文档部署</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 天俱时.</div></div></div></footer></div>
<script src="/tjs-ems/assets/js/runtime~main.7606b820.js"></script>
<script src="/tjs-ems/assets/js/main.9169c8b6.js"></script>
</body>
</html>